<html><head><meta charset="UTF-8"><link rel="import" href="albums-app.html"></head><body><dom-module id="album-list">

    <template>

        <style include="shared-styles"></style>

        <iron-search-ajax id="searchAjax" response="{{response}}">
        </iron-search-ajax>
        <app-header-layout>
            <app-header effects="resize-title waterfall fade-background" reveals="">
                <app-toolbar class="top-toolbar">
                    <content select="[drawer-toggle]"></content>
                    <div class="title ellipsis header-title">Music App Research</div>
                    <div main-title=""></div>
                    <div condensed-title=""></div>
                </app-toolbar>
                <search-bar query="{{query}}" placeholder="Enter a title to perform a search">
                </search-bar>
            </app-header>
            <template is="dom-if" if="{{_isPerformingRequest(query, onRequest)}}">
                <div class="content-message">
                    <div class="title">Searching ...</div>
                </div>
            </template>
            <template is="dom-if" if="{{_isEmptyQuery(query)}}">
                <div class="content-message">
                    <iron-icon class="icon" icon="icons:search" item-icon=""></iron-icon>
                    <div class="title">Find your favorite music</div>
                    <div class="message">Search for songs, artists, albums, playlists and profiles.</div>
                </div>
            </template>
            <template is="dom-if" if="{{_isEmptyAlbums(query, onRequest, response.albums.items)}}">
                <div class="content-message">
                    <div class="title">No results were found for “{{query}}”</div>
                    <div class="message">Please, make sure the words are spelled correctly or try fewer words or different words.</div>
                </div>
            </template>
            <div class="content">
                <template is="dom-if" if="{{!onRequest}}">
                    <template is="dom-if" if="{{!_isEmptyQuery(query)}}">
                        <template is="dom-repeat" items="{{response.albums.items}}" as="album">
                            <album-card album="[[album]]" album-id="[[album.id]]"></album-card>
                        </template>
                    </template>
                </template>
            </div>
        </app-header-layout>

  </template>

  <script>Polymer({is:"album-list",properties:{query:{type:String,value:function(){var e=["Michael Jackson","Prince","U2","Bruce Springsteen","Guns N’ Roses","George Michael","Metallica","Dire Straits","Heroes del Silencio","AC/DC","Iron Maiden","Bon Jovi","R.E.M.","The Cure","Kool and the Gang","Queen","Bryan Adams","INXS","Aerosmith","Stevie Wonder","Pet Shop Boys","Depeche Mode","Pink Floyd","Whitesnake","Sade","Scorpions"],t=Math.floor(Math.random()*e.length);return e[t]},observer:"_queryChanged"},onRequest:{type:Boolean,value:!1}},attached:function(){this._addEventHandlers()},detached:function(){this._removeEventHandlers()},_addEventHandlers:function(){this._addRequestEventHandlers()},_addRequestEventHandlers:function(){this.addEventListener("search-bar-search",function(){this._queryChanged()}.bind(this)),this.$.searchAjax.addEventListener("request",function(){this.onRequest=!0}.bind(this)),this.$.searchAjax.addEventListener("response",function(){this.onRequest=!1}.bind(this)),this.$.searchAjax.addEventListener("error",function(){this.onRequest=!1}.bind(this))},_removeEventHandlers:function(){this._removeRequestEventHandlers()},_removeRequestEventHandlers:function(){this.removeEventListener("search-bar-search"),this.$.searchAjax.removeEventListener("request"),this.$.searchAjax.removeEventListener("response"),this.$.searchAjax.removeEventListener("error")},_isPerformingRequest:function(e,t){return!this._isEmptyQuery(e)&&this._isOnRequest(t)},_isOnRequest:function(e){return e===!0},_isEmptyAlbums:function(e,t,n){return!this._isEmptyQuery(e)&&!this._isOnRequest(t)&&n&&0===n.length},_isEmptyQuery:function(e){return""===e},_queryChanged:function(e){this._isEmptyQuery(e)||this.$.searchAjax.generateRequest(e)}});</script>
</dom-module>
</body></html>